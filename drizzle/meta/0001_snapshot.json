{
  "id": "ad7677c7-8275-4046-87fc-fd560a1b1e44",
  "prevId": "1cb4bc76-5966-4156-b7dc-a662d5a1f18f",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.scuttlepay_api_key": {
      "name": "scuttlepay_api_key",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "keyHash": {
          "name": "keyHash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "keyPrefix": {
          "name": "keyPrefix",
          "type": "varchar(12)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "isActive": {
          "name": "isActive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "lastUsedAt": {
          "name": "lastUsedAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "expiresAt": {
          "name": "expiresAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "api_key_user_id_idx": {
          "name": "api_key_user_id_idx",
          "columns": [
            {
              "expression": "userId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "api_key_prefix_active_idx": {
          "name": "api_key_prefix_active_idx",
          "columns": [
            {
              "expression": "keyPrefix",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "isActive",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "api_key_hash_active_idx": {
          "name": "api_key_hash_active_idx",
          "columns": [
            {
              "expression": "keyHash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "isActive",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "scuttlepay_api_key_userId_scuttlepay_user_id_fk": {
          "name": "scuttlepay_api_key_userId_scuttlepay_user_id_fk",
          "tableFrom": "scuttlepay_api_key",
          "tableTo": "scuttlepay_user",
          "columnsFrom": [
            "userId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scuttlepay_user": {
      "name": "scuttlepay_user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "thirdwebUserId": {
          "name": "thirdwebUserId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "image": {
          "name": "image",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "scuttlepay_user_thirdwebUserId_unique": {
          "name": "scuttlepay_user_thirdwebUserId_unique",
          "nullsNotDistinct": false,
          "columns": [
            "thirdwebUserId"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scuttlepay_merchant": {
      "name": "scuttlepay_merchant",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "shopDomain": {
          "name": "shopDomain",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "accessToken": {
          "name": "accessToken",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "storefrontToken": {
          "name": "storefrontToken",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scopes": {
          "name": "scopes",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripeAccountId": {
          "name": "stripeAccountId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "isActive": {
          "name": "isActive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "installedAt": {
          "name": "installedAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "uninstalledAt": {
          "name": "uninstalledAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "scuttlepay_merchant_shopDomain_unique": {
          "name": "scuttlepay_merchant_shopDomain_unique",
          "nullsNotDistinct": false,
          "columns": [
            "shopDomain"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scuttlepay_order": {
      "name": "scuttlepay_order",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "transactionId": {
          "name": "transactionId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "walletId": {
          "name": "walletId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "shopifyOrderId": {
          "name": "shopifyOrderId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "shopifyOrderNumber": {
          "name": "shopifyOrderNumber",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "productId": {
          "name": "productId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "productName": {
          "name": "productName",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "variantId": {
          "name": "variantId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "unitPriceUsdc": {
          "name": "unitPriceUsdc",
          "type": "numeric(20, 6)",
          "primaryKey": false,
          "notNull": true
        },
        "totalUsdc": {
          "name": "totalUsdc",
          "type": "numeric(20, 6)",
          "primaryKey": false,
          "notNull": true
        },
        "merchantId": {
          "name": "merchantId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "storeUrl": {
          "name": "storeUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "errorMessage": {
          "name": "errorMessage",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "order_wallet_id_idx": {
          "name": "order_wallet_id_idx",
          "columns": [
            {
              "expression": "walletId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "scuttlepay_order_transactionId_scuttlepay_transaction_id_fk": {
          "name": "scuttlepay_order_transactionId_scuttlepay_transaction_id_fk",
          "tableFrom": "scuttlepay_order",
          "tableTo": "scuttlepay_transaction",
          "columnsFrom": [
            "transactionId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "scuttlepay_order_walletId_scuttlepay_wallet_id_fk": {
          "name": "scuttlepay_order_walletId_scuttlepay_wallet_id_fk",
          "tableFrom": "scuttlepay_order",
          "tableTo": "scuttlepay_wallet",
          "columnsFrom": [
            "walletId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "scuttlepay_order_merchantId_scuttlepay_merchant_id_fk": {
          "name": "scuttlepay_order_merchantId_scuttlepay_merchant_id_fk",
          "tableFrom": "scuttlepay_order",
          "tableTo": "scuttlepay_merchant",
          "columnsFrom": [
            "merchantId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "scuttlepay_order_transactionId_unique": {
          "name": "scuttlepay_order_transactionId_unique",
          "nullsNotDistinct": false,
          "columns": [
            "transactionId"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scuttlepay_spending_policy": {
      "name": "scuttlepay_spending_policy",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "walletId": {
          "name": "walletId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "apiKeyId": {
          "name": "apiKeyId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "maxPerTx": {
          "name": "maxPerTx",
          "type": "numeric(20, 6)",
          "primaryKey": false,
          "notNull": true
        },
        "dailyLimit": {
          "name": "dailyLimit",
          "type": "numeric(20, 6)",
          "primaryKey": false,
          "notNull": true
        },
        "monthlyLimit": {
          "name": "monthlyLimit",
          "type": "numeric(20, 6)",
          "primaryKey": false,
          "notNull": false
        },
        "allowedMerchants": {
          "name": "allowedMerchants",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "isActive": {
          "name": "isActive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "scuttlepay_spending_policy_walletId_scuttlepay_wallet_id_fk": {
          "name": "scuttlepay_spending_policy_walletId_scuttlepay_wallet_id_fk",
          "tableFrom": "scuttlepay_spending_policy",
          "tableTo": "scuttlepay_wallet",
          "columnsFrom": [
            "walletId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "scuttlepay_spending_policy_apiKeyId_scuttlepay_api_key_id_fk": {
          "name": "scuttlepay_spending_policy_apiKeyId_scuttlepay_api_key_id_fk",
          "tableFrom": "scuttlepay_spending_policy",
          "tableTo": "scuttlepay_api_key",
          "columnsFrom": [
            "apiKeyId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "spending_policy_api_key_idx": {
          "name": "spending_policy_api_key_idx",
          "nullsNotDistinct": false,
          "columns": [
            "apiKeyId"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scuttlepay_transaction": {
      "name": "scuttlepay_transaction",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "walletId": {
          "name": "walletId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "apiKeyId": {
          "name": "apiKeyId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "amountUsdc": {
          "name": "amountUsdc",
          "type": "numeric(20, 6)",
          "primaryKey": false,
          "notNull": true
        },
        "txHash": {
          "name": "txHash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "merchantAddress": {
          "name": "merchantAddress",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "productId": {
          "name": "productId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "productName": {
          "name": "productName",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "merchantId": {
          "name": "merchantId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "storeUrl": {
          "name": "storeUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "errorMessage": {
          "name": "errorMessage",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "initiatedAt": {
          "name": "initiatedAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "settledAt": {
          "name": "settledAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "transaction_wallet_status_idx": {
          "name": "transaction_wallet_status_idx",
          "columns": [
            {
              "expression": "walletId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "transaction_wallet_created_idx": {
          "name": "transaction_wallet_created_idx",
          "columns": [
            {
              "expression": "walletId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "createdAt",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "transaction_api_key_status_created_idx": {
          "name": "transaction_api_key_status_created_idx",
          "columns": [
            {
              "expression": "apiKeyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "createdAt",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "scuttlepay_transaction_walletId_scuttlepay_wallet_id_fk": {
          "name": "scuttlepay_transaction_walletId_scuttlepay_wallet_id_fk",
          "tableFrom": "scuttlepay_transaction",
          "tableTo": "scuttlepay_wallet",
          "columnsFrom": [
            "walletId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "scuttlepay_transaction_apiKeyId_scuttlepay_api_key_id_fk": {
          "name": "scuttlepay_transaction_apiKeyId_scuttlepay_api_key_id_fk",
          "tableFrom": "scuttlepay_transaction",
          "tableTo": "scuttlepay_api_key",
          "columnsFrom": [
            "apiKeyId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "scuttlepay_transaction_merchantId_scuttlepay_merchant_id_fk": {
          "name": "scuttlepay_transaction_merchantId_scuttlepay_merchant_id_fk",
          "tableFrom": "scuttlepay_transaction",
          "tableTo": "scuttlepay_merchant",
          "columnsFrom": [
            "merchantId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scuttlepay_wallet": {
      "name": "scuttlepay_wallet",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "chainId": {
          "name": "chainId",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "label": {
          "name": "label",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "default": "'default'"
        },
        "thirdwebId": {
          "name": "thirdwebId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "isActive": {
          "name": "isActive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "wallet_user_active_idx": {
          "name": "wallet_user_active_idx",
          "columns": [
            {
              "expression": "userId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "isActive",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "scuttlepay_wallet_userId_scuttlepay_user_id_fk": {
          "name": "scuttlepay_wallet_userId_scuttlepay_user_id_fk",
          "tableFrom": "scuttlepay_wallet",
          "tableTo": "scuttlepay_user",
          "columnsFrom": [
            "userId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "scuttlepay_wallet_address_unique": {
          "name": "scuttlepay_wallet_address_unique",
          "nullsNotDistinct": false,
          "columns": [
            "address"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}